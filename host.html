<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Host | Permainan ADIL</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">
<style>
  body {
    background: radial-gradient(circle at center, #022c22, #011a12);
    color: #d1fae5;
    font-family: 'Poppins', sans-serif;
    text-align: center;
    min-height: 100vh;
    padding: 2rem;
  }
  #current {
    font-size: 6rem;
    font-weight: 900;
    color: #6ee7b7;
    text-shadow: 0 0 40px #10b981;
    margin-top: 1rem;
  }
  .btn {
    background: #10b981;
    color: white;
    font-weight: bold;
    border-radius: 0.75rem;
    padding: 0.8rem 2rem;
    margin: 1rem;
    transition: all 0.25s ease;
  }
  .btn:hover { background: #34d399; transform: scale(1.05); }
  #history {
    background: rgba(6,95,70,0.3);
    border-radius: 1rem;
    padding: 1rem;
    margin-top: 1.5rem;
    text-align: left;
    max-width: 600px;
    margin-inline: auto;
  }
  #history h3 {
    text-align: center;
    font-weight: bold;
    color: #a7f3d0;
  }
  .entry {
    display: inline-block;
    background: rgba(16,185,129,0.2);
    padding: 0.5rem 0.8rem;
    border-radius: 0.5rem;
    margin: 0.3rem;
    font-weight: 700;
    color: #bbf7d0;
  }
</style>
</head>
<body>

<h1 class="text-3xl font-bold text-emerald-300 mb-4">üéôÔ∏è Host Permainan ADIL</h1>

<div id="current">--</div>

<div>
  <button id="btnKocok" class="btn">üé≤ KOCOK ANGKA</button>
  <button id="btnReset" class="btn bg-red-600 hover:bg-red-700">‚ôªÔ∏è RESET</button>
</div>

<div id="history">
  <h3>Riwayat Kocok</h3>
  <div id="list"></div>
</div>

<script>
  const hurufADIL = ['A', 'D', 'I', 'L'];
  let angkaBelumKeluar = Array.from({length: 50}, (_, i) => i + 1);
  let riwayat = JSON.parse(localStorage.getItem('adil-history')) || [];

  const currentEl = document.getElementById('current');
  const listEl = document.getElementById('list');

  function tampilRiwayat() {
    listEl.innerHTML = '';
    riwayat.forEach(item => {
      const div = document.createElement('div');
      div.className = 'entry';
      div.textContent = `${item.huruf}:${String(item.angka).padStart(2, '0')}`;
      listEl.appendChild(div);
    });
  }

  function acakAngka() {
    if (angkaBelumKeluar.length === 0) {
      alert('Semua angka sudah keluar!');
      return;
    }

    const huruf = hurufADIL[Math.floor(Math.random() * 4)];
    const index = Math.floor(Math.random() * angkaBelumKeluar.length);
    const angka = angkaBelumKeluar.splice(index, 1)[0];

    const hasil = { huruf, angka };
    localStorage.setItem('adil-last', angka); // kirim angka ke pemain
    localStorage.setItem('adil-last-huruf', huruf);

    currentEl.textContent = `${huruf}:${String(angka).padStart(2, '0')}`;
    currentEl.style.color = '#6ee7b7';
    currentEl.style.textShadow = '0 0 40px #10b981';

    setTimeout(() => {
      riwayat.unshift(hasil);
      localStorage.setItem('adil-history', JSON.stringify(riwayat));
      tampilRiwayat();
    }, 2000); // jeda 2 detik sebelum masuk riwayat
  }

  document.getElementById('btnKocok').addEventListener('click', acakAngka);

  document.getElementById('btnReset').addEventListener('click', () => {
    if (confirm('Reset semua hasil kocokan?')) {
      angkaBelumKeluar = Array.from({length: 50}, (_, i) => i + 1);
      riwayat = [];
      localStorage.removeItem('adil-last');
      localStorage.removeItem('adil-last-huruf');
      localStorage.removeItem('adil-history');
      currentEl.textContent = '--';
      listEl.innerHTML = '';
    }
  });

  tampilRiwayat();
</script>
</body>
</html>
